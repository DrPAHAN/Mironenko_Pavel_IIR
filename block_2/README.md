# Детектор Контуров с OpenCV и Фильтрацией

Этот проект представляет собой скрипт на Python, использующий библиотеку OpenCV для обнаружения и фильтрации контуров на изображениях. Код улучшает базовое решение задачи CV_1_44, добавляя адаптивную бинаризацию, аппроксимацию контуров, вычисление площадей и фильтрацию по заданному диапазону площадей. Проект поддерживает загрузку изображений, генерацию тестовых данных и различные режимы вывода.

## Описание

Код выполняет следующее:

- Загрузку или генерацию изображения (включая использование `skimage.data.coins()`).
- Предобработку изображения с адаптивной бинаризацией для улучшения обнаружения контуров.
- Поиск контуров с помощью `cv2.findContours()`.
- Вычисление площади каждого контура.
- Фильтрацию контуров по заданному диапазону площадей.
- Выделение отфильтрованных контуров на изображении.
- Отображение количества оставшихся контуров.

## Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/DrPAHAN/Mironenko_Pavel_IIR.git
   cd block_2
   ```

2. Установите зависимости:

   ```bash
   pip3 install -r requirements.txt
   ```

## Быстрый старт

### Для тестирования с собственным изображением и выводом в формате plt (опционально cv2, file):

```bash
python3 cv_1_44_find_contours.py -i 1.png -o plt
```

### Примеры с фильтрацией по площади:

- С минимальной и максимальной площадью:

  ```bash
  python3 cv_1_44_find_contours.py --min_area 50 --max_area 500 -o cv2
  ```
- С собственным изображением и сохранением результата:

  ```bash
  python3 cv_1_44_find_contours.py -i 1.png --min_area 100 --max_area 100000 -o file
  ```

## Требования

- Python 3.x
- Библиотеки: `opencv-python`, `scikit-image`, `matplotlib`

Список зависимостей указан в файле `requirements.txt`.

## Описание кода

### Функциональность

- **Предобработка**: Адаптивная бинаризация для работы с разными условиями освещения.
- **Обнаружение контуров**: Использование `cv2.findContours` с аппроксимацией для улучшения определения фигур.
- **Фильтрация**: Контуры фильтруются по площади и минимальному количеству вершин (≥3).
- **Вывод**: Поддержка режимов отображения через OpenCV (`cv2`), Matplotlib (`plt`) или сохранение в файл.

### Аргументы командной строки

- `-i, --image`: Путь к входному изображению (опционально).
- `-o, --output`: Режим вывода (`cv2`, `plt`, `file`, по умолчанию `cv2`).
- `-min, --min_area`: Минимальная площадь контура (по умолчанию 0).
- `-max, --max_area`: Максимальная площадь контура (по умолчанию бесконечность).

### Ограничения

- Код оптимизирован для фигур с ≥3 вершинами (например, треугольники, квадраты, круги).
- Адаптивная бинаризация может требовать настройки параметров (размер блока и константа) для специфических изображений.

## Ожидаемый результат

- **Визуализация**: Исходное изображение и отфильтрованные контуры отображаются рядом.
- **Консоль**: Вывод площадей всех контуров и итоговое количество оставшихся (например, "Количество оставшихся контуров: 5").
- **Сохранение**: Если выбран режим `file`, результат сохраняется как `result.png`.
